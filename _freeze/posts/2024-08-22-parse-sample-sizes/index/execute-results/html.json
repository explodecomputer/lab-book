{
  "hash": "1e17600cbd7659b9d60d5487286e9914",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"2024-08-22-parse-sample-sizes\"\nauthor: Gibran Hemani\ndate: \"2024-09-22\"\ncategories: []\n---\n\n\n## Background\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'dplyr'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n\n\n:::\n\n```{.r .cell-code}\nfn <- function(x) {\n    # Remove commas from numbers\n    b <- gsub(\"(\\\\d+),(?=\\\\d+)\", \"\\\\1\", x, perl = TRUE) %>% \n    # Split sample components based on ','\n        strsplit(\", \") %>% \n        {.[[1]]}\n    # Keep components that contain the word 'cases'\n    b1 <- grep(\"cases\", b, value = TRUE)\n    # If none, probably a continuous trait\n    if(length(b1) == 0) {\n        b1 <- b\n    }\n    # Now just extract the numbers from each 'cases' sample component and sum them\n\n    suppressWarnings({\n    b1 %>% \n        sapply(., \\(y) {\n            strsplit(y, \" \") %>% \n            unlist() %>% as.numeric() %>% na.omit() %>% first() %>% as.numeric()\n        }) %>% sum(na.rm=TRUE)\n    })\n}\n\n# Example\nx <- \"25,453 European ancestry cases, 58,113 European ancestry controls, 360 cases and controls, PMID:25056061, 6,524 cases, 24,001 controls\"\nfn(x)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 32337\n```\n\n\n:::\n\n```{.r .cell-code}\nx <- \"360 cases and controls\"\nfn(x)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 360\n```\n\n\n:::\n:::\n\n\n---\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsessionInfo()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.1 (2024-06-14)\nPlatform: aarch64-apple-darwin20\nRunning under: macOS Sonoma 14.6.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Europe/London\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] dplyr_1.1.4\n\nloaded via a namespace (and not attached):\n [1] digest_0.6.35     utf8_1.2.4        R6_2.5.1          fastmap_1.2.0    \n [5] tidyselect_1.2.1  xfun_0.44         magrittr_2.0.3    glue_1.7.0       \n [9] tibble_3.2.1      knitr_1.47        pkgconfig_2.0.3   htmltools_0.5.8.1\n[13] rmarkdown_2.27    generics_0.1.3    lifecycle_1.0.4   cli_3.6.2        \n[17] fansi_1.0.6       vctrs_0.6.5       compiler_4.4.1    tools_4.4.1      \n[21] pillar_1.9.0      evaluate_0.23     yaml_2.3.8        rlang_1.1.3      \n[25] jsonlite_1.8.8    htmlwidgets_1.6.4\n```\n\n\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}