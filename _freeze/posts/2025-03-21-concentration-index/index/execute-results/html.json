{
  "hash": "334df82175191d84a3000000d2ac796c",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Concentration index\"\nauthor: Gibran Hemani\ndate: \"2025-03-21\"\ncategories: []\n---\n\n\n## Background\n\nHow do concentration index and Lorenz curves respond to different simulation scenarios?\n\n\n## Simulations\n\n### Random\n\nGWAS attention is independent of DALY\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'dplyr'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(rineq)\n\nndisease <- 450\ndiseases <- tibble(\n    disease = 1:ndisease, \n    daly = rbeta(ndisease, 1, 0.7), \n    gwas_attention = rbeta(ndisease, 1, 0.7))\nci1 <- ci(ineqvar=diseases$gwas_attention, outcome=diseases$daly, method=\"direct\")\nsummary(ci1)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCall:\n[1] \"ci(ineqvar = diseases$gwas_attention, outcome = diseases$daly, \"\n[2] \"    method = \\\"direct\\\")\"                                       \n\nType of Concentration Index:\n CI \n\nHealth Concentration Index:\n 0.002435111 \n\nVariance:\n 0.0001686933 \n\n95% Confidence Interval:\n -0.02302129 0.02789151 \n```\n\n\n:::\n\n```{.r .cell-code}\nplot(ci1)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n\nTry again with uniform distribtuion\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndiseases <- tibble(\n    disease = 1:ndisease, \n    daly = rbeta(ndisease, 1, 1), \n    gwas_attention = rbeta(ndisease, 1, 1))\nci1 <- ci(ineqvar=diseases$gwas_attention, outcome=diseases$daly, method=\"direct\")\nsummary(ci1)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCall:\n[1] \"ci(ineqvar = diseases$gwas_attention, outcome = diseases$daly, \"\n[2] \"    method = \\\"direct\\\")\"                                       \n\nType of Concentration Index:\n CI \n\nHealth Concentration Index:\n -0.01067268 \n\nVariance:\n 0.0002296126 \n\n95% Confidence Interval:\n -0.04037195 0.0190266 \n```\n\n\n:::\n\n```{.r .cell-code}\nplot(ci1)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n### Proportional\n\nGWAS attention is the same as DALY\n\n\n::: {.cell}\n\n```{.r .cell-code}\nndisease <- 450\ndiseases <- tibble(\n    disease = 1:ndisease, \n    daly = rbeta(ndisease, 1, 0.7), \n    gwas_attention = daly + rnorm(ndisease, 0, sd=0.001))\nci1 <- ci(ineqvar=diseases$gwas_attention, outcome=diseases$daly, method=\"direct\")\nsummary(ci1)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCall:\n[1] \"ci(ineqvar = diseases$gwas_attention, outcome = diseases$daly, \"\n[2] \"    method = \\\"direct\\\")\"                                       \n\nType of Concentration Index:\n CI \n\nHealth Concentration Index:\n 0.277959 \n\nVariance:\n 0.0001193012 \n\n95% Confidence Interval:\n 0.2565513 0.2993668 \n```\n\n\n:::\n\n```{.r .cell-code}\nplot(ci1)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\nAgain with uniform distribution\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndiseases <- tibble(\n    disease = 1:ndisease, \n    daly = rbeta(ndisease, 1, 1), \n    gwas_attention = daly + rnorm(ndisease, 0, sd=0.001))\nci1 <- ci(ineqvar=diseases$gwas_attention, outcome=diseases$daly, method=\"direct\")\nsummary(ci1)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCall:\n[1] \"ci(ineqvar = diseases$gwas_attention, outcome = diseases$daly, \"\n[2] \"    method = \\\"direct\\\")\"                                       \n\nType of Concentration Index:\n CI \n\nHealth Concentration Index:\n 0.3434778 \n\nVariance:\n 0.0001280117 \n\n95% Confidence Interval:\n 0.3213023 0.3656532 \n```\n\n\n:::\n\n```{.r .cell-code}\nplot(ci1)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\n### Unequal\n\nGWAS attention grows faster than DALY\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndiseases <- tibble(\n    disease = 1:ndisease, \n    daly = 1:ndisease, \n    gwas_attention = daly^2)\nci1 <- ci(ineqvar=diseases$gwas_attention, outcome=diseases$daly, method=\"direct\")\nsummary(ci1)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCall:\n[1] \"ci(ineqvar = diseases$gwas_attention, outcome = diseases$daly, \"\n[2] \"    method = \\\"direct\\\")\"                                       \n\nType of Concentration Index:\n CI \n\nHealth Concentration Index:\n 0.3325926 \n\nVariance:\n 0.0001307385 \n\n95% Confidence Interval:\n 0.3101822 0.355003 \n```\n\n\n:::\n\n```{.r .cell-code}\nplot(ci1)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\n\n---\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsessionInfo()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.3 (2025-02-28)\nPlatform: aarch64-apple-darwin20\nRunning under: macOS Sonoma 14.6.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Europe/London\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] rineq_0.2.3 dplyr_1.1.4\n\nloaded via a namespace (and not attached):\n [1] digest_0.6.37     utf8_1.2.4        R6_2.5.1          fastmap_1.2.0    \n [5] tidyselect_1.2.1  xfun_0.48         magrittr_2.0.3    glue_1.8.0       \n [9] tibble_3.2.1      knitr_1.48        pkgconfig_2.0.3   htmltools_0.5.8.1\n[13] rmarkdown_2.27    generics_0.1.3    lifecycle_1.0.4   cli_3.6.3        \n[17] fansi_1.0.6       vctrs_0.6.5       compiler_4.4.3    tools_4.4.3      \n[21] pillar_1.9.0      evaluate_1.0.1    yaml_2.3.10       rlang_1.1.4      \n[25] jsonlite_1.8.9    htmlwidgets_1.6.4\n```\n\n\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}